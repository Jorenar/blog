---

layout: post
title:  "A few C trics"
categories: programming
tags: [ C ]

---

# Named parameters

```c
#include <stdio.h>

struct foo_ { int x; int y; float z; };
void foo(struct foo_* A)
{
    int x   = A->x;
    float z = A->z;

    printf("%d %d %f\n", x, A->y, z);
}

int main()
{
    foo(&(struct foo_){.y = 12, .x = -2, .z = 0.2});
    foo(&(struct foo_){12, -2, 0.2});
    return 0;
}
```

And with a bit of macro magic we could simpliyfy the function call:

```c
#include <stdio.h>

#define NFP(type, name, args)    \
    struct name##_ args;         \
    type name(struct name##_* A)

#define NFPO(name, ...) name(&(struct name ## _){ __VA_ARGS__ })

NFP(void, foo, { int x; int y; float z; })
{
    int x   = A->x;
    float z = A->z;

    printf("%d %d %f\n", x, A->y, z);
}
#define foo(...) NFPO(foo, __VA_ARGS__)

int main()
{
    foo(.y = 12, .x = -2, .z = 0.2);
    foo(12, -2, 0.2);
    return 0;
}
```
